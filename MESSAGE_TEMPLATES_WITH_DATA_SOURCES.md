# ููุงุฐุฌ ุฑุณุงุฆู ุงูุฅุดุนุงุฑุงุช ูุน ูุตุงุฏุฑ ุงูุจูุงูุงุช - ุงูุจูุช v1.2.0

## ๐ค ูููุฐุฌ ุฑุณุงูุฉ ุงูุชุญููู ุงูุขูู (format_short_alert_message)

### ูููู ุงูุฑุณุงูุฉ:
```
๐จ ุฅุดุนุงุฑ ุชุฏุงูู ุขูู {symbol_emoji}

๐ ุฅุดุงุฑุฉ ุชุฏุงูู ุฐููุฉ

โโโโโโโโโโโโโโโโโโโโโโโโโ
๐ฑ {SYMBOL} | {symbol_name} {symbol_emoji}
๐ก ูุตุฏุฑ ุงูุจูุงูุงุช: ๐ MetaTrader5 (ูุญุธู - ุจูุงูุงุช ุญููููุฉ)

๐ฐ ุงูุณุนุฑ ุงูุญุงูู: {current_price}
๐ ุดุฑุงุก: {bid} | ุจูุน: {ask} | ูุฑู: {spread} ({spread_points} ููุทุฉ)
โก๏ธ ุงูุชุบููุฑ ุงููููู: {daily_change}
โฐ ููุช ุงูุชุญููู: {formatted_time}

โโโโโโโโโโโโโโโโโโโโโโโโโ
โก ุฅุดุงุฑุฉ ุงูุชุฏุงูู ุงูุฑุฆูุณูุฉ

{action_color} ููุน ุงูุตููุฉ: {action_text}
๐ ุณุนุฑ ุงูุฏุฎูู ุงูููุชุฑุญ: {entry_price}
๐ฏ ุงููุฏู ุงูุฃูู: ({points1} ููุทุฉ)
๐ฏ ุงููุฏู ุงูุซุงูู: ({points2} ููุทุฉ)
๐ ููู ุงูุฎุณุงุฑุฉ: ({stop_points} ููุทุฉ)
๐ ูุณุจุฉ ุงููุฎุงุทุฑุฉ/ุงูููุงูุฃุฉ: 1:{risk_reward_ratio}
โ ูุณุจุฉ ูุฌุงุญ ุงูุตููุฉ: {confidence}%

โโโโโโโโโโโโโโโโโโโโโโโโโ
๐ฐ ุชุญุฏูุซ ุฅุฎุจุงุฑู:
{news}

โโโโโโโโโโโโโโโโโโโโโโโโโ
โฐ ๐ ๐ {formatted_time} | ๐ค ุชุญููู ุฐูู ุขูู
```

### ูุตุงุฏุฑ ุงูุจูุงูุงุช ููุชุญููู ุงูุขูู:

| ุงููููุฉ | ุงููุตุฏุฑ | ุงููุธููุฉ/ุงููุชุบูุฑ | ุงูููุงุญุธุงุช |
|---------|---------|------------------|------------|
| **symbol_emoji** | `ALL_SYMBOLS[symbol]['emoji']` | ูุนุฑู ุฏุงุฎููุงู | ุฑููุฒ ุชุนุจูุฑูุฉ ุซุงุจุชุฉ |
| **symbol_name** | `ALL_SYMBOLS[symbol]['name']` | ูุนุฑู ุฏุงุฎููุงู | ุฃุณูุงุก ุงูุฃุตูู ุจุงูุนุฑุจูุฉ |
| **current_price** | `price_data.get('last', price_data.get('bid', 0))` | MetaTrader5 | ุณุนุฑ ุขุฎุฑ ุตููุฉ ุฃู ุณุนุฑ ุงูุดุฑุงุก |
| **bid** | `price_data.get('bid', 0)` | MetaTrader5 | ุณุนุฑ ุงูุดุฑุงุก ุงููุญุธู |
| **ask** | `price_data.get('ask', 0)` | MetaTrader5 | ุณุนุฑ ุงูุจูุน ุงููุญุธู |
| **spread** | `price_data.get('spread', 0)` | MetaTrader5 ูุญุณูุจ | ask - bid |
| **spread_points** | `price_data.get('spread_points', 0)` | ุญุณุงุจ ุฏุงุฎูู | spread รท pip_size |
| **daily_change** | ุญุณุงุจ ุฏุงุฎูู | ููุงุฑูุฉ ุฃุณุนุงุฑ | ูุณุจุฉ ุงูุชุบููุฑ ูู ุจุฏุงูุฉ ุงูููู |
| **formatted_time** | `format_time_for_user(user_id)` | ุฏุงูุฉ ุฏุงุฎููุฉ | ุญุณุจ ููุทูุฉ ุงููุณุชุฎุฏู ุงูุฒูููุฉ |
| **action_text** | `analysis.get('action')` | Google Gemini AI | BUY/SELL/HOLD |
| **entry_price** | `analysis.get('entry_price') or current_price` | Gemini AI ุฃู ุงูุณุนุฑ ุงูุญุงูู | ุณุนุฑ ุงูุฏุฎูู ุงูููุชุฑุญ |
| **points1** | ุญุณุงุจ ูู `target1` | pip_value_detector | ุนุฏุฏ ุงูููุงุท ูููุฏู ุงูุฃูู |
| **points2** | ุญุณุงุจ ูู `target2` | pip_value_detector | ุนุฏุฏ ุงูููุงุท ูููุฏู ุงูุซุงูู |
| **stop_points** | ุญุณุงุจ ูู `stop_loss` | pip_value_detector | ุนุฏุฏ ููุงุท ููู ุงูุฎุณุงุฑุฉ |
| **risk_reward_ratio** | `analysis.get('risk_reward')` | Gemini AI ุฃู ุญุณุงุจ ุฏุงุฎูู | ูุณุจุฉ ุงููุฎุงุทุฑุฉ ููููุงูุฃุฉ |
| **confidence** | `analysis.get('confidence')` | Google Gemini AI | ูุณุจุฉ ูุฌุงุญ ุงูุตููุฉ |
| **news** | `gemini_analyzer.get_symbol_news(symbol)` | Google Gemini AI | ุฃุฎุจุงุฑ ุงูุชุตุงุฏูุฉ ูุชุนููุฉ |

---

## ๐ค ูููุฐุฌ ุฑุณุงูุฉ ุงูุชุญููู ุงููุฏูู (format_comprehensive_analysis_v120)

### ูููู ุงูุฑุณุงูุฉ:
```
๐ **ุชุญููู ุดุงูู - {symbol_emoji} {symbol_name}**

๐ฐ **ุงูุณุนุฑ ุงูุญุงูู:** `{current_price}`
๐ณ **ุฑุฃุณ ุงููุงู ุงููุญุฏุฏ ููุชุฏุงูู:** ${user_capital}
๐ **ุญุฌู ุงููุฑูุฒ ุงูููุชุฑุญ:** {recommended_lot_size} ููุช
๐ **ุงูุชูุตูุฉ:** {action_emoji} **{action_text}**
{confidence_emoji} **ูุณุชูู ุงูุซูุฉ:** {confidence}% ({confidence_text})

๐ **ุงูุชุญููู ุงูุชูุตููู:**
{ai_analysis}

โ๏ธ **ุชูุจูู:** ูุฐุง ุชุญููู ูููุนูููุงุช ููุท ูููุณ ูุตูุญุฉ ุงุณุชุซูุงุฑูุฉ.

๐ **ููุช ุงูุชุญููู:** {timestamp}
๐ **ูุตุฏุฑ ุงูุจูุงูุงุช:** {data_source}
```

### ูุตุงุฏุฑ ุงูุจูุงูุงุช ููุชุญููู ุงููุฏูู:

| ุงููููุฉ | ุงููุตุฏุฑ | ุงููุธููุฉ/ุงููุชุบูุฑ | ุงูููุงุญุธุงุช |
|---------|---------|------------------|------------|
| **symbol_emoji** | `symbol_info['emoji']` | ูุนุฑู ุฏุงุฎููุงู | ูู ูุงููุณ ALL_SYMBOLS |
| **symbol_name** | `symbol_info['name']` | ูุนุฑู ุฏุงุฎููุงู | ุงุณู ุงูุฃุตู ุจุงูุนุฑุจูุฉ |
| **current_price** | `price_data.get('last', price_data.get('bid', 0))` | MetaTrader5 (force_fresh=True) | ุจูุงูุงุช ูุญุธูุฉ ูุจุงุดุฑุฉ |
| **user_capital** | `get_user_capital(user_id)` | ุฅุนุฏุงุฏุงุช ุงููุณุชุฎุฏู | ุฑุฃุณ ุงููุงู ุงููุญููุธ |
| **recommended_lot_size** | `calculate_position_size(user_capital)` | ุญุณุงุจ ุฏุงุฎูู | ุญุณุจ ุฑุฃุณ ุงููุงู |
| **action_emoji** | ุญุณุงุจ ุฏุงุฎูู | ุญุณุจ ููุน ุงูุฅุฌุฑุงุก | ๐ข ุดุฑุงุกุ ๐ด ุจูุนุ ๐ก ุงูุชุธุงุฑ |
| **action_text** | `analysis.get('action', 'HOLD')` | Google Gemini AI | ุดุฑุงุก/ุจูุน/ุงูุชุธุงุฑ |
| **confidence_emoji** | ุญุณุงุจ ุฏุงุฎูู | ุญุณุจ ูุณุจุฉ ุงูุซูุฉ | ๐ฏ๐ดโ๏ธโ๏ธ๐ซ |
| **confidence** | `analysis.get('confidence', 50)` | Google Gemini AI | ูุณุจุฉ ุงูุซูุฉ 0-100% |
| **confidence_text** | ุญุณุงุจ ุฏุงุฎูู | ุชุฑุฌูุฉ ุงููุณุจุฉ | ุนุงููุฉ ุฌุฏุงู/ุนุงููุฉ/ูุชูุณุทุฉ/ููุฎูุถุฉ |
| **ai_analysis** | `analysis.get('ai_analysis', 'ุชุญููู ุบูุฑ ูุชููุฑ')` | Google Gemini AI | ุงูุชุญููู ุงูููุตู |
| **timestamp** | `datetime.now().strftime('%Y-%m-%d %H:%M:%S')` | ููุช ุงููุธุงู | ููุช ุฅูุดุงุก ุงูุชุญููู |
| **data_source** | `price_data.get('source', 'MT5')` | MetaTrader5 | ูุตุฏุฑ ุจูุงูุงุช ุงูุฃุณุนุงุฑ |

---

## ๐ ููุงุฑูุฉ ุจูู ุงูููุนูู:

### ุงูุชุญููู ุงูุขูู:
- **ุงูุบุฑุถ**: ุฅุดุนุงุฑุงุช ุณุฑูุนุฉ ูููุฑุต ุงูุชุฌุงุฑูุฉ
- **ุงูุชูุฑุงุฑ**: ูู ุฏูููุฉ (ุญุณุจ ุฅุนุฏุงุฏุงุช ุงููุณุชุฎุฏู)
- **ูุตุฏุฑ ุงูุจูุงูุงุช**: ูุงุด + ุชุญุฏูุซุงุช ุฏูุฑูุฉ
- **ุทูู ุงูุฑุณุงูุฉ**: ูุฎุชุตุฑ (ุญูุงูู 15-20 ุณุทุฑ)
- **ุงูุชูุงุนู**: ุฃุฒุฑุงุฑ ุชูููู ๐๐
- **ุงููุฏู**: ุณุฑุนุฉ ุงูุฅุดุนุงุฑ ุจุงููุฑุต

### ุงูุชุญููู ุงููุฏูู:
- **ุงูุบุฑุถ**: ุชุญููู ุดุงูู ููุตู
- **ุงูุชูุฑุงุฑ**: ุนูุฏ ุงูุทูุจ ููุท
- **ูุตุฏุฑ ุงูุจูุงูุงุช**: ูุญุธู ูุจุงุดุฑ (force_fresh=True)
- **ุทูู ุงูุฑุณุงูุฉ**: ููุตู (ุญูุงูู 10-15 ุณุทุฑ + ุชุญููู AI)
- **ุงูุชูุงุนู**: ุชูููู + ุชุญุฏูุซ + ุชุญููู ุขุฎุฑ
- **ุงููุฏู**: ููู ุนููู ูููุถุน

---

## ๐ง ุฏูุงู ุงููุณุงุนุฏุฉ ูุฃุตูููุง:

### ุฏูุงู ุงูุชูููุช:
- `format_time_for_user(user_id)` - ุชูุณูู ุงูููุช ุญุณุจ ููุทูุฉ ุงููุณุชุฎุฏู
- `get_user_timezone(user_id)` - ุฌูุจ ููุทูุฉ ุงููุณุชุฎุฏู ุงูุฒูููุฉ

### ุฏูุงู ุฅุนุฏุงุฏุงุช ุงููุณุชุฎุฏู:
- `get_user_capital(user_id)` - ุฑุฃุณ ุงููุงู ุงููุญุฏุฏ
- `get_user_trading_mode(user_id)` - ููุท ุงูุชุฏุงูู (scalping/long_term)

### ุฏูุงู ุญุณุงุจ ุงูููุงุท:
- `pip_calculate_points(price_diff, symbol)` - ูู pip_value_detector
- `calculate_points_accurately(price_diff, symbol, capital, current_price)` - ุญุณุงุจ ุดุงูู
- `get_pip_value(asset_name)` - ูู pip_value_detector
- `get_asset_category(asset_name)` - ูู pip_value_detector

### ุฏูุงู AI:
- `gemini_analyzer.analyze_market_data_with_retry()` - ุงูุชุญููู ุงูุฑุฆูุณู
- `gemini_analyzer.get_symbol_news()` - ุงูุฃุฎุจุงุฑ ุงูุงูุชุตุงุฏูุฉ
- `calculate_ai_success_rate()` - ุญุณุงุจ ูุณุจุฉ ุงููุฌุงุญ ุงูุฏููุงููููุฉ

---

## ๐ ุชุญุณููุงุช ูุน pip_value_detector:

1. **ุฏูุฉ ุฃูุจุฑ**: ููู ููุงุท ูุญุฏุฏุฉ ููู ุฃุตู
2. **ุชุตููู ูุงุถุญ**: forex, metals, crypto
3. **ุณูููุฉ ุงูุชุทููุฑ**: ููู ูููุตู ููุชุญุฏูุซุงุช
4. **ุชูุงูู ุนูุณู**: ูุนูู ูุน ุงููุธุงู ุงููุฏูู
5. **ุงุฎุชุจุงุฑุงุช ุดุงููุฉ**: ุฏูุงู ุงุฎุชุจุงุฑ ูุฏูุฌุฉ

---

*ุชู ุฅูุดุงุก ูุฐุง ุงูุฏููู ููุณุงุนุฏุฉ ุงููุทูุฑูู ูู ููู ูุธุงู ุงูุฑุณุงุฆู ููุตุงุฏุฑ ุงูุจูุงูุงุช ูู ุงูุจูุช v1.2.0*