# ๐ง ุฏููู ุงุณุชูุดุงู ุฃุฎุทุงุก ุงุชุตุงู Telegram ูุฅุตูุงุญูุง

## ๐จ ุงูุฎุทุฃ: "Infinity polling: polling exited"

### ๐ ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:

1. **๐ ูุดููุฉ ุงุชุตุงู ุงูุฅูุชุฑูุช**
2. **๐ ูุดููุฉ ูู Token ุงูุจูุช** 
3. **โฐ ุงูุชูุงุก ูููุฉ ุงูุงุชุตุงู**
4. **๐ซ ุญุธุฑ ูุคูุช ูู Telegram**
5. **๐พ ุงุณุชููุงู ุฐุงูุฑุฉ ุนุงูู**
6. **๐ ุงููุทุงุน ูู ุงูุดุจูุฉ**

---

## โ ุงูุญููู ุงููุทุจูุฉ ูู ุงูุจูุช:

### ๐ **1. ูุธุงู ุฅุนุงุฏุฉ ุงูุงุชุตุงู ุงูุชููุงุฆู:**
- 10 ูุญุงููุงุช ุฅุนุงุฏุฉ ุงุชุตุงู ุชููุงุฆูุฉ
- ุงูุชุธุงุฑ ูุชุฏุฑุฌ (8-90 ุซุงููุฉ)
- ุชูุธูู ุงูุฐุงูุฑุฉ ูุจู ูู ูุญุงููุฉ

### ๐ **2. ูุญุต ุตุญุฉ ุงูุงุชุตุงู:**
- ุงุฎุชุจุงุฑ ุงุชุตุงู Telegram ูุจู ุงูุจุฏุก
- ูุฑุงูุจุฉ ูุณุชูุฑุฉ ูุญุงูุฉ ุงูุจูุช
- ูุดู ูุจูุฑ ูููุดุงูู

### โ๏ธ **3. ุฅุนุฏุงุฏุงุช ูุญุณูุฉ:**
```python
bot.infinity_polling(
    none_stop=False,          # ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก
    interval=2,               # ุชูููู ุงูุถุบุท ุนูู ุงูุฎุงุฏู
    timeout=90,               # ูููุฉ ุฃุทูู ููุงุณุชูุฑุงุฑ
    long_polling_timeout=45,  # ูููุฉ polling ุฃุทูู
    restart_on_change=True    # ุฅุนุงุฏุฉ ุงูุชุดุบูู ุนูุฏ ุงูุชุบููุฑ
)
```

### ๐งน **4. ุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ:**
- ุชูุธูู ุชููุงุฆู ููุฐุงูุฑุฉ (`gc.collect()`)
- ูุฑุงูุจุฉ ุงุณุชููุงู ุงูููุงุฑุฏ
- ุชุญุณูู ุงูุฃุฏุงุก

---

## ๐๏ธ ุฎุทูุงุช ุงูุฅุตูุงุญ ุงููุฏููุฉ:

### **ุงูุฎุทูุฉ 1: ูุญุต ุงูุงุชุตุงู**
```bash
# ูุญุต ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช
ping google.com

# ูุญุต ุงุชุตุงู Telegram
ping api.telegram.org
```

### **ุงูุฎุทูุฉ 2: ูุญุต Token ุงูุจูุช**
1. ุชุฃูุฏ ูู ุตุญุฉ BOT_TOKEN ูู `config.py`
2. ุชุฃูุฏ ูู ุนุฏู ุงูุชูุงุก ุตูุงุญูุฉ ุงูุจูุช
3. ุฌุฑุจ ุฅูุดุงุก ุจูุช ุฌุฏูุฏ ููุงุฎุชุจุงุฑ

### **ุงูุฎุทูุฉ 3: ูุญุต ุญุงูุฉ ุงูุดุจูุฉ**
- ุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุฌุฏุงุฑ ูุงุฑู ูุญุฌุจ ุงูุงุชุตุงู
- ุชุญูู ูู ุฅุนุฏุงุฏุงุช Proxy ุฅุฐุง ููุช ุชุณุชุฎุฏูู
- ุฌุฑุจ ุชุบููุฑ DNS (8.8.8.8 ุฃู 1.1.1.1)

### **ุงูุฎุทูุฉ 4: ูุฑุงูุจุฉ ุงูููุงุฑุฏ**
```bash
# ูุญุต ุงุณุชููุงู ุงูุฐุงูุฑุฉ
tasklist | findstr python

# ูุญุต ุงุณุชููุงู CPU
wmic process where name="python.exe" get processid,percentprocessortime
```

---

## ๐ ุทุฑู ุงูุชุดุบูู ุงููุญุณูุฉ:

### **1. ุงูุชุดุบูู ูุน ุงููุฑุงูุจ:**
```bash
python bot_health_monitor.py
```
ุฃู ุงุณุชุฎุฏู:
```bash
run_bot_with_monitor.bat
```

### **2. ุงูุชุดุบูู ุงููุจุงุดุฑ ุงููุญุณู:**
```bash
run_bot_stable.bat
```

### **3. ุงูุชุดุบูู ุงููุฏูู ูุน ูุฑุงูุจุฉ:**
```bash
python tbot_v1.2.0.py
```

---

## ๐ ูุฑุงูุจุฉ ุงูุณุฌูุงุช:

### **ุณุฌูุงุช ูููุฉ ูููุฑุงูุจุฉ:**
```
[SYSTEM] ุจุฏุก ุงุณุชูุจุงู ุงูุฑุณุงุฆู (ูุญุงููุฉ 1/10)...
[OK] ุงุชุตุงู Telegram ุณููู - ุงูุจูุช: YourBotName
[WARNING] ุงููุทุงุน ูู infinity polling - ูุญุงููุฉ ุฅุนุงุฏุฉ ุงูุงุชุตุงู...
[ERROR] ุฎุทุฃ Telegram API (ูุญุงููุฉ 2/10): Connection timeout
```

### **ุนูุงูุงุช ุงูุฎุทุฑ:**
- `polling exited` - ุงููุทุงุน ุงูุงุชุตุงู
- `Connection timeout` - ูุดููุฉ ุดุจูุฉ
- `ApiException` - ูุดููุฉ ูู API
- `Break infinity polling` - ุฅููุงู ูุณุฑู

---

## โก ูุตุงุฆุญ ููุงุณุชูุฑุงุฑ:

### **1. ุงูุจูุฆุฉ:**
- ุงุณุชุฎุฏู ุงุชุตุงู ุฅูุชุฑูุช ูุณุชูุฑ
- ุชุฃูุฏ ูู ุนุฏู ุงููุทุงุน ุงูููุฑุจุงุก
- ุงุณุชุฎุฏู UPS ุฅุฐุง ุฃููู

### **2. ุงููุธุงู:**
- ุฃุนุฏ ุชุดุบูู ุงูุฌูุงุฒ ุฏูุฑูุงู
- ูุธู ูููุงุช ุงูู temp
- ุญุฏุซ Python ูุงูููุชุจุงุช

### **3. ุงููุฑุงูุจุฉ:**
- ุฑุงูุจ ุณุฌูุงุช ุงูุจูุช ููููุงู
- ุชุญูู ูู ุญุงูุฉ ุงูุฐุงูุฑุฉ
- ุงุนูู backup ููุฅุนุฏุงุฏุงุช

---

## ๐ง ุงูุฅุนุฏุงุฏุงุช ุงููุชูุฏูุฉ:

### **ูู `config.py`:**
```python
# ุฅุนุฏุงุฏุงุช ุงูุงุชุตุงู ุงููุญุณูุฉ
TELEGRAM_TIMEOUT = 90
TELEGRAM_LONG_POLLING_TIMEOUT = 45
TELEGRAM_RETRY_COUNT = 10
TELEGRAM_RETRY_DELAY = 8

# ุฅุนุฏุงุฏุงุช ุงูุฐุงูุฑุฉ
MEMORY_CLEANUP_INTERVAL = 300  # ูู 5 ุฏูุงุฆู
MAX_MEMORY_USAGE = 512  # MB
```

---

## ๐ ุนูุฏ ุงููุดู ุงููุณุชูุฑ:

### **1. ุฅุนุงุฏุฉ ุฅูุดุงุก ุงูุจูุช:**
1. ุงุฐูุจ ุฅูู [@BotFather](https://t.me/botfather)
2. ุฃูุดุฆ ุจูุช ุฌุฏูุฏ
3. ุงุญุตู ุนูู Token ุฌุฏูุฏ
4. ุญุฏุซ `config.py`

### **2. ุชุบููุฑ ุงูุฎุงุฏู:**
- ุฌุฑุจ ุชุดุบูู ุงูุจูุช ุนูู ุฎุงุฏู ูุฎุชูู
- ุงุณุชุฎุฏู VPS ูุน ุงุชุตุงู ูุณุชูุฑ
- ููุฑ ูู ุงุณุชุฎุฏุงู Docker

### **3. ุงูุงุชุตุงู ุจุงูุฏุนู:**
- ุฑุงุฌุน [Telegram Bot API Status](https://status.telegram.org/)
- ุชุญูู ูู [Telegram Support](https://telegram.org/support)

---

## ๐ ูุคุดุฑุงุช ุงูุฃุฏุงุก:

### **ูุคุดุฑุงุช ุตุญูุฉ:**
- โ ุฅุนุงุฏุฉ ุงูุงุชุตุงู < 3 ูุฑุงุช/ุณุงุนุฉ
- โ ุงุณุชุฌุงุจุฉ < 2 ุซุงููุฉ
- โ ุงุณุชููุงู ุฐุงูุฑุฉ < 200MB
- โ CPU < 5%

### **ูุคุดุฑุงุช ุชุญุฐูุฑูุฉ:**
- โ๏ธ ุฅุนุงุฏุฉ ุงูุงุชุตุงู > 5 ูุฑุงุช/ุณุงุนุฉ
- โ๏ธ ุงุณุชุฌุงุจุฉ > 5 ุซูุงู
- โ๏ธ ุงุณุชููุงู ุฐุงูุฑุฉ > 300MB
- โ๏ธ CPU > 10%

---

**๐ก ูุตูุญุฉ:** ุงุณุชุฎุฏู `run_bot_with_monitor.bat` ููุญุตูู ุนูู ุฃูุถู ุงุณุชูุฑุงุฑ ูููุซูููุฉ!